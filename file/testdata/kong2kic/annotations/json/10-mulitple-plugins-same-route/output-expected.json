{
    "kind": "KongIngress",
    "apiVersion": "configuration.konghq.com/v1",
    "metadata": {
        "name": "example-service",
        "creationTimestamp": null,
        "annotations": {
            "kubernetes.io/ingress.class": "kong"
        }
    },
    "upstream": {
        "host_header": "example.com",
        "algorithm": "round-robin",
        "slots": 10000,
        "healthchecks": {
            "active": {
                "concurrency": 10,
                "healthy": {
                    "http_statuses": [
                        200,
                        302
                    ],
                    "interval": 0,
                    "successes": 0
                },
                "http_path": "/",
                "https_sni": "example.com",
                "https_verify_certificate": true,
                "type": "http",
                "timeout": 1,
                "unhealthy": {
                    "http_failures": 0,
                    "http_statuses": [
                        429,
                        404,
                        500,
                        501,
                        502,
                        503,
                        504,
                        505
                    ],
                    "tcp_failures": 0,
                    "timeouts": 0,
                    "interval": 0
                },
                "headers": {
                    "x-another-header": [
                        "bla"
                    ],
                    "x-my-header": [
                        "foo",
                        "bar"
                    ]
                }
            },
            "passive": {
                "healthy": {
                    "http_statuses": [
                        200,
                        201,
                        202,
                        203,
                        204,
                        205,
                        206,
                        207,
                        208,
                        226,
                        300,
                        301,
                        302,
                        303,
                        304,
                        305,
                        306,
                        307,
                        308
                    ],
                    "successes": 0
                },
                "type": "http",
                "unhealthy": {
                    "http_failures": 0,
                    "http_statuses": [
                        429,
                        500,
                        503
                    ],
                    "tcp_failures": 0,
                    "timeouts": 0
                }
            },
            "threshold": 0
        },
        "hash_on": "none",
        "hash_fallback": "none",
        "hash_on_cookie_path": "/"
    }
}{
    "kind": "KongPlugin",
    "apiVersion": "configuration.konghq.com/v1",
    "metadata": {
        "name": "aws-lambda",
        "creationTimestamp": null,
        "annotations": {
            "kubernetes.io/ingress.class": "kong"
        }
    },
    "config": {
        "aws_key": "my_key",
        "aws_region": "us-west-2",
        "aws_secret": "my_secret",
        "function_name": "my_function"
    },
    "plugin": "aws-lambda",
    "status": {}
}{
    "kind": "KongPlugin",
    "apiVersion": "configuration.konghq.com/v1",
    "metadata": {
        "name": "cors",
        "creationTimestamp": null,
        "annotations": {
            "kubernetes.io/ingress.class": "kong"
        }
    },
    "config": {
        "credentials": true,
        "exposed_headers": [
            "X-My-Header"
        ],
        "headers": [
            "Authorization"
        ],
        "max_age": 3600,
        "methods": [
            "GET",
            "POST"
        ],
        "origins": [
            "example.com"
        ]
    },
    "plugin": "cors",
    "status": {}
}{
    "kind": "KongPlugin",
    "apiVersion": "configuration.konghq.com/v1",
    "metadata": {
        "name": "file-log",
        "creationTimestamp": null,
        "annotations": {
            "kubernetes.io/ingress.class": "kong"
        }
    },
    "config": {
        "path": "/var/log/kong/kong.log",
        "reopen": true
    },
    "plugin": "file-log",
    "status": {}
}{
    "kind": "KongPlugin",
    "apiVersion": "configuration.konghq.com/v1",
    "metadata": {
        "name": "http-log",
        "creationTimestamp": null,
        "annotations": {
            "kubernetes.io/ingress.class": "kong"
        }
    },
    "config": {
        "content_type": "application/json",
        "http_endpoint": "http://example.com/logs",
        "keepalive": 60000,
        "method": "POST",
        "queue_size": 1000,
        "retry_count": 10,
        "timeout": 10000
    },
    "plugin": "http-log",
    "status": {}
}{
    "kind": "KongPlugin",
    "apiVersion": "configuration.konghq.com/v1",
    "metadata": {
        "name": "ip-restriction",
        "creationTimestamp": null,
        "annotations": {
            "kubernetes.io/ingress.class": "kong"
        }
    },
    "config": {
        "allow": [
            "192.168.0.1/24"
        ],
        "deny": [
            "192.168.0.2/32"
        ]
    },
    "plugin": "ip-restriction",
    "status": {}
}{
    "kind": "KongPlugin",
    "apiVersion": "configuration.konghq.com/v1",
    "metadata": {
        "name": "rate-limiting-advanced",
        "creationTimestamp": null,
        "annotations": {
            "kubernetes.io/ingress.class": "kong"
        }
    },
    "config": {
        "hide_client_headers": false,
        "identifier": "consumer",
        "limit": [
            5
        ],
        "namespace": "example_namespace",
        "strategy": "local",
        "sync_rate": -1,
        "window_size": [
            30
        ]
    },
    "plugin": "rate-limiting-advanced",
    "status": {}
}{
    "kind": "KongPlugin",
    "apiVersion": "configuration.konghq.com/v1",
    "metadata": {
        "name": "request-termination",
        "creationTimestamp": null,
        "annotations": {
            "kubernetes.io/ingress.class": "kong"
        }
    },
    "config": {
        "message": "Forbidden",
        "status_code": 403
    },
    "plugin": "request-termination",
    "status": {}
}{
    "kind": "KongPlugin",
    "apiVersion": "configuration.konghq.com/v1",
    "metadata": {
        "name": "response-ratelimiting",
        "creationTimestamp": null,
        "annotations": {
            "kubernetes.io/ingress.class": "kong"
        }
    },
    "config": {
        "limits": {
            "limit_name": {
                "minute": 10
            }
        },
        "policy": "local"
    },
    "plugin": "response-ratelimiting",
    "status": {}
}{
    "kind": "KongPlugin",
    "apiVersion": "configuration.konghq.com/v1",
    "metadata": {
        "name": "tcp-log",
        "creationTimestamp": null,
        "annotations": {
            "kubernetes.io/ingress.class": "kong"
        }
    },
    "config": {
        "host": "example.com",
        "port": 1234
    },
    "plugin": "tcp-log",
    "status": {}
}{
    "kind": "Ingress",
    "apiVersion": "networking.k8s.io/v1",
    "metadata": {
        "name": "example-route",
        "creationTimestamp": null,
        "annotations": {
            "konghq.com/headers.x-another-header": "bla",
            "konghq.com/headers.x-my-header": "foo,bar",
            "konghq.com/https-redirect-status-code": "302",
            "konghq.com/methods": "GET,POST",
            "konghq.com/plugins": "aws-lambda,cors,file-log,http-log,ip-restriction,rate-limiting-advanced,request-termination,response-ratelimiting,tcp-log",
            "konghq.com/preserve-host": "true",
            "konghq.com/protocols": "http,https",
            "konghq.com/regex-priority": "1",
            "konghq.com/snis": "example.com",
            "konghq.com/strip-path": "false"
        }
    },
    "spec": {
        "ingressClassName": "kong",
        "rules": [
            {
                "host": "example.com",
                "http": {
                    "paths": [
                        {
                            "path": "/v1/example",
                            "pathType": "ImplementationSpecific",
                            "backend": {
                                "service": {
                                    "name": "example-service",
                                    "port": {
                                        "number": 80
                                    }
                                }
                            }
                        }
                    ]
                }
            }
        ]
    },
    "status": {
        "loadBalancer": {}
    }
}{
    "kind": "Service",
    "apiVersion": "v1",
    "metadata": {
        "name": "example-service",
        "creationTimestamp": null,
        "annotations": {
            "konghq.com/connect-timeout": "5000",
            "konghq.com/override": "example-service",
            "konghq.com/path": "/v1",
            "konghq.com/protocol": "http",
            "konghq.com/read-timeout": "60000",
            "konghq.com/retries": "5",
            "konghq.com/write-timeout": "60000"
        }
    },
    "spec": {
        "ports": [
            {
                "protocol": "TCP",
                "port": 80,
                "targetPort": 80
            }
        ],
        "selector": {
            "app": "example-service"
        }
    },
    "status": {
        "loadBalancer": {}
    }
}{
    "kind": "KongConsumer",
    "apiVersion": "configuration.konghq.com/v1",
    "metadata": {
        "name": "example-user",
        "creationTimestamp": null,
        "annotations": {
            "kubernetes.io/ingress.class": "kong"
        }
    },
    "username": "example-user",
    "custom_id": "1234567890",
    "status": {}
}